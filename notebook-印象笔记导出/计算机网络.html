<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, MWS); Windows/10.0.15063 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="434"/>

<div>
<span><div><h2>第一章 数据包分析技术与网络基础</h2><p>1.数据包分析可以看到除了加密信息之外的所有信息</p><p>2.流行的数据包分析软件 tcpdump wireshark OmniPeek</p><p>3.数据包嗅探器的工作原理 将网卡设置为混杂模式从网络线缆上收集二进制数据并转换和分析</p><p>4.并非每个数据包都是从应用层产生的</p><p>5.集线器在半双工模式下运行，在所有的端口上转发</p><p>6.交换机用CAM 内容寻址寄存器 根据MAC地址来唯一确定设备</p><p>7.路由器 全双工</p><p>8.网络流量分为广播、多播、单播</p><ul><li>MAC广播地址 FF:FF:FF:FF:FF:FF</li><li><p>IP广播地址 ip范围内最大的地址</p><p>9.多播的工作原理是将数据包接受者加入多播组的编制方案 #P16</p></li></ul><h2><a name="t2"></a>第二章 监听网络线路</h2><pre><code><span style="font-family: 微软雅黑;">本章目标：考虑网络中的设备，决定在哪里安置嗅探器</span></code></pre><p>1.混杂模式是从网络线路上查看所有流量的模式，即使流量不是发给本机的。正常的情况可以收到arp协议发送的广播包。</p><p>2.在集线器连接的网络中嗅探可以看到所有的流量，但是同一时刻只有一个设备可以通信，现在不常见，经常会产生冲突。</p><p>3.在交换式网络中嗅探：（正常的可视范围是本机数据包和广播数据包）</p><ul><li>端口镜像<br/><ul><li>cisco命令 set span &lt;source port &gt; &lt;destnation. port &gt;</li><li>最佳方法，不会留下痕迹，不会产生额外数据包</li></ul></li><li>集线器输出<br/><ul><li>将本机和目标用同一个集线器连接</li></ul></li><li>网络分流器<br/><ul><li>三口：获得流入流出所有流量</li><li>四口：可单独关注某一方向上的流量</li></ul></li><li><p>arp欺骗</p><ul><li>工具：<a href="http://www.oxid.it/">Cain&amp;Abel</a></li><li><p>arp协议:</p><blockquote><p>A想要和B通信，但是A不知道B的mac地址，于是在广播域内发送一个广播包(向mac层的广播地址发送一个数据包)，问：“谁知道ip B的mac地址？” B发送一个arp request，A收到B的mac地址，并保存在自己的缓存表中，AB于是可以通信。</p></blockquote></li><li><p>可以使用非对称路由的方式避免所有流量经过嗅探器，避免DOS</p></li></ul></li></ul><h2><a name="t3"></a>第三章：wireshark入门</h2><p>1.主界面：packet list、packet details、packet bytes</p><p>2.设置首选项：edit-&gt;preferences</p><p>3.着色规则：view-&gt;coloring rules 可以使用明显的颜色来标记关注的流量</p><h2><a name="t4"></a>第四章：玩转捕获数据包</h2><p>1.保存和导出捕获的文件：从wireshark1.8以后的版本，都将Save As版本中的Packet Range功能移到File-&gt;Export Specified Packets菜单中去了。 <a href="http://blog.hehehehehe.cn/a/17694.htm">来自喝小酒的网摘</a></p><p>2.合并捕获的文件：File-&gt;Merge with Caputre File</p><p>3.查找：ctrl+F （Ctrl+B/N 前后切换）</p><p>4.标记：Ctrl+M （Shift+Ctrl+B/N 前后切换）</p><p>5.打印：Ctrl+P</p><p>6.时间显示格式：Ctrl+Alt+1~7</p><p>7.设置相对时间参考：当时间显示格式为相对于捕获开始的时间时，可以设置<code>*REF*</code>来设定参考值</p><p>8.设定捕获选项：Capture-&gt;options 可以设置先存储再捕获、存储的方式、捕获过滤器、停止捕获的条件、显示方式、名字解析等等。</p><p>9.过滤器：</p><ul><li>捕获过滤器（提升捕获性能） P63<br/><ul><li>Capture-&gt;Options</li><li>格式： dst host 192.168.1.0 &amp;&amp;[|| !] tcp port 80</li><li>还可检查协议头中每一字节<br/><ul><li>tcp[13]&amp;32==32 设置了URG位的TCP数据包</li><li>tcp[13]&amp;16==16 设置了ACK位的ACK数据包</li><li>tcp[13]==18 TCP SYN-ACK数据包</li></ul></li></ul></li><li>显示过滤器<br/><ul><li><a href="http://www.wireshark.org/docs/dfref">完整列表</a></li><li>常用举例<br/><ul><li>!tcp.port=3389 排除RDP流量</li><li>tcp.flags.syn==1 具有SYN标志位的TCP数据包</li><li>tcp.port==23 || tcp.port==21 文本管理流量（Telnet或FTP)</li><li>smtp || pop ||imap 文本email流量</li></ul></li></ul></li></ul><h2><a name="t5"></a>第五章 wireshark高级特性</h2><pre><code>本章目标：学习wireshark在分析的时候用到的特性
</code></pre><p>1.查看端点、会话信息 Statistics-&gt;endpoints/conversations</p><p>2.查看协议分布情况、占的比重 Statistics-&gt;Protocol Hierarchy</p><p>3.名字解析即一个用来将其地址转化成名字的协议，可能会失败，会带来额外的开销，额外的流量，每次打开一个捕获文件就要重新解析一次。</p><p>4.协议解析即将原始的比特流翻译成wireshark程序识别的协议并显示出来。比如员工用了443端口来传输ftp流量，wireshark会以ssl解析器来显示。这时，可以强制更换解析器：右键，decode as。可以查看解析器的源码来了解解析的过程，安装程序目录：epan/dissectors/。</p><p>5.跟踪TCP流可以将TCP流重组成易读的形式。</p><p>6.查看数据包的长度可以了解到是控制流量比较多还是上传下载的流量比较多。</p><p>7.图形显示：</p><ul><li>IO图IO Graph：看系统某时刻的吞吐量，看不同协议的流量传输的时间走势。</li><li>双向时间图TCP-&gt;Round Trip Time：显示某个数据包一个RTT占用的时间，用来找到通信中的瓶颈。</li><li>数据流图Flow Graph：将ip端口之间的交流可视化，比如可以直观的展示TCP三次握手。</li></ul><p>8.专家信息：可以用来统计数据包中某些特定状态的警告。如：tcp重传输，重复ack等。</p><h2><a name="t6"></a>第六章 通用底层网络协议</h2><pre><code>本章目标：学习TCP、UDP、IP的协议，并且分析其流量。
</code></pre><p><a href="http://blog.csdn.net/kongjing0815/article/details/6650536">多种协议数据包结构</a></p><h3><a name="t7"></a>1.arp协议</h3><p>1.1地址解析协议包含两个过程：arp请求和arp响应。</p><blockquote><p><strong>arp请求</strong>：操作码为1，源mac、源ip、目的mac（00.00.00.00.00.00表示未知）、目的ip。</p><p>请求时，以太网的dst位为ff.ff.ff.ff.ff.ff（表示广播），src位为源mac，type为arp。</p><p><strong>arp响应</strong>：操作码为2，源mac（请求时未知的mac）、源ip、、目的mac、目的ip。</p></blockquote><p>1.2无偿的（gratuitous）arp请求：未经请求的arp请求，用来更新别的主机arp缓存表，ip地址改变时会发，当<a href="http://lib.csdn.net/base/operatingsystem" style="color:#df3434; font-weight:bold;" target="_blank" title="操作系统知识库">操作系统</a>重启时有可能会发，为了<em>负载均衡</em>的时候也会发。</p><blockquote><p>以太网帧格式和arp请求时一致。<br/>
arp数据包格式中和arp请求不一样的地方在于：目的ip和源ip一致。</p></blockquote><h3><a name="t8"></a>2.ip</h3><p>1.ipv4地址由网络位和主机位构成，可以用掩码判断，也可以用CIDR判断。</p><p>2.Type of Service 被路由器用来进行流量优先排序。</p><p>3.经过一个繁忙的路由器，TTL有可能被减去不止1。TTL还可以防止路由器配置错误导致死循环。</p><p>4.ip分片的原因是若2层的协议是以太网，其MTU为1500字节。分片的数据包拥有相同的identification。分片时，flags中的more fragement set若不是最后一个分片，则要置1，offset也要被置数据，第二个偏移量有可能为1480（1500-20ip头）。</p><p>4.更多参考RFC791。</p><h3><a name="t9"></a>3.tcp</h3><p>1.TCP有两类端口号：1~1023知名端口号，1024~65535临时端口号。通信时，源端口号由操作系统选取，目的端口号是标准的。wireshark会对端口号开启名字解析，可以关闭，也可以手动修改名字解析，在程序目录的services的文件中。<a href="http://www.iana.org/assignments/service-names-port-numbers/">通用端口号及其对应的服务</a></p><p>2.三次握手</p><ul><li>A发送一个syn包，seq=i</li><li>B回复一个syn+ack包，ack=i+1，seq=j</li><li>A回复一个ack包，ack为j+1*，seq为i+1*</li><li>ack即接受主机希望得到的下一个数据包的序号，ack=seq+1</li><li>wireshark中可以用相对端口号显示序号，edit-&gt;preferences中修改protocols中的tcp</li></ul><p>3.四次握手</p><ul><li>A发送FIN/ACK包告诉B通信已经完成</li><li>B回复ACK响应 ack的值为fin包中seq的值+1</li><li>B发送FIN/ACK包告诉A通信已经完成</li><li>A回复ACK响应</li><li>四次握手是由于TCP的半关闭造成的，TCP是一个全双工的连接。A是主动关闭，B是被动关闭。</li></ul><p>4.TCP重置。对未知的系统发起一个http请求时，若80端口未打开，则，目标回复一个RST/ACK包，RST表示对80端口通信无效，ACK为seq+1。</p><p>5.更多参考RFC793|TCP/IP详解 卷1：协议</p><h3><a name="t10"></a>4.udp</h3><p>1.udp不关心数据传输的可靠性，使用udp的协议一般用应用层的协议来保证其可靠性。</p><h3><a name="t11"></a>5.icmp</h3><p>1.type类型为3表示目标不可达，code类型为3，表示端口不可达。[更多参考]（www.iana.org/assignment/icmp-parameters）</p><p>2.type为8，code为0表示是一个echo请求，type为0，code为0表示是一个echo响应。两者通过可变域中的DATA变量的字符串来匹配。</p><p>**3.此处不理解**p122</p><blockquote><p>可以使用增加ping的数据填充，当检测小网络时，强制将数据包分片。这样有什么用？<br/>
icmp的echo请求中使用的随机文本会引起攻击者兴趣。可以用来推测设备使用的操作系统，还可以在这个域中放置数据位作为反向链接的手段。</p></blockquote><p>4.windows中的tracert路由跟踪使用icmp，原理是设置逐步增加的ttl，使得在到达每一个路由器的时候ttl减为0，路由器回复一个type为11，code为0的响应，表示不可达。响应的icmp数据包被叫做双头包，结尾部分含有 第一次echo请求数据包的ip层头和icmp数据拷贝。（也就是请求时的ip层及以上的数据包被写在了响应中的可变域中，检修的时候很有用），这样就获得了途中的路由器信息。</p><h2><a name="t12"></a>第七章 常见高层网络协议</h2><h3><a name="t13"></a>1.DHCP</h3><p>1.DHCP比Bootstrap Protocol更加复杂，已经取代后者。后者用来给设备分配ip地址，或者用来加载镜像启动等等。前者分配ip地址、dns地址、网关地址。DHCP服务器也支持bp的客户端请求，并分配一个不回收的ip地址给他。了解即可。<a href="https://en.wikipedia.org/wiki/Bootstrap_Protocol">boopstrap wikipedia</a></p><p>2.DHCP续租过程（DORA）</p><ul><li>Discover port 68-&gt; port 67<br/><ul><li>此时没有ip地址，从0.0.0.0发送到255.255.255.255(还不知道dhcp服务器)，请求包type为1</li></ul></li><li>Offer<br/><ul><li>DHCP服务器回应，提供子网掩码、续租时间、等信息。此时请求的ip地址还未确定，所以用arp协议获取的mac地址来通信。</li></ul></li><li>Request<br/><ul><li>请求的地址不再是空，而是DHCP offer的ip地址，dhcp服务器的地址也不再是空。</li></ul></li><li>Acknowledgement<br/><ul><li>DHCP服务器发送一个ACK确认，并在数据库中记录。</li></ul></li></ul><p>3.当在租约内续租的时候，只需要RA两步即可。</p><p>4.<a href="http://www.iana.org/assignments/bootp-dhcp-parameters">dhcp选项完整列表</a></p><h3><a name="t14"></a>2.DNS</h3><ul><li><a href="http://www.isc.org/community/reference/RFCs/DNS">RFC文档</a></li><li><a href="http://www.iana.org/assignments/DNS-parameters">DNS选项完整列表</a></li></ul><p>1.递归查询即dns服务器之间查询，查询时，递归标志位会被置位。如果dns服务器不知道当前域名的ip地址，那么该服务器会变成dns客户端向上一级dns服务器查询。</p><p>2.区域传送一般发生在要对dns服务器做冗余备份的时候发生，防止dns服务器挂了，域名解析不成功。<br/>
分为：AXFR和IXFR 整个区域和部分区域两种。传送时使用TCP协议保证可靠性。</p><p>3.个人总结:所以DNS可以用TCP和UDP的53端口来实现通信，一般是UDP。</p><h3><a name="t15"></a>3.http</h3><p>不做过多描述。</p><h2><a name="t16"></a>第八章 基础的现实世界场景</h2><pre><code>本章目标：分析一些常见的网络流量
</code></pre><p>1.<strong>不理解</strong>，twitter和facebook对比分析</p><p>2.访问网站时，HTTP流量可能需要应用别的站点的资源，这会带来DNS查询。2n个dns会话代表有n个查询。<br/>
可用此法，查看请求的页面总共指向了哪些域名。</p><p>3.新版本的wireshark不存在summary选项，可以点击左下角的笔记图标查看捕获文件的信息。</p><p>4.实际案例分析（个人思考为主）</p><ul><li><p>可以访问内网资源，不可以访问internet</p><ul><li>正常上网的过程是PC先获得DHCP分配的动态ip（或者手动设置一个ip），然后将数据包发送到默认网关，又网关进一步发送，从而接入internet。若是发送一个http请求，应该由dns服务器解析成正确的ip地址，获得ip地址之后，再由arp协议获得mac地址。之后便可以在物理层通信。（个人总结）</li><li>然而遇到的情况是一直在进行dns查询，说明没有获得dns服务器响应的ip地址，而别的用户可以上网，说明dns服务器没问题，可以发送dns查询，说明本身的协议栈没问题，所以问题就在于dns服务器发送的ip地址PC收不到。那么就可能是网关没有把数据包转发过来，所以，可能是网关出了问题。</li><li>最后检查发现是本机不接受dhcp配置的网关，而是手动配置了ip和网关。其实在一开始发送arp查询的时候，就应该是发往网关的，如果不是发往网关，说明网关配置错了。</li></ul></li><li><p>不能上网第二个案例 不能上google</p><ul><li>遇到的问题是不能上google，arp直接询问了一个未知ip的mac地址，获得了之后与其通信，发送tcp syn包但是获得了一个rst包。</li><li>在发送一个http请求的时候，先检查dns缓存表中时候有域名和ip的映射，再检查hosts文件中时候有映射，没有的话再查询dns服务器。案例中在发送syn包之前进行了arp查询mac地址，没有查ip地址，说明已经建立了映射，所以需要看一下host文件中时候有映射，或者清除一下dns缓存表。</li><li>windows7下查看 和清除dns缓存表： ipconfig /displaydns [/flushdns]</li></ul></li><li><p>谁都无法上google</p><ul><li>在进行一个http请求的时候，向dns服务器发送了一个请求，然后获得了google的ip地址，假设arp过程已经完成了，存在arp缓存表中，之后向目标发送一个syn包，之后又发了一个syn包，目标什么回复都没有。如果是80端口没开应该回复一个rst，什么回复都没有有可能是对方的协议栈除了问题，有可能是开了防火墙，或者web容器配置错误等等。这就不是我们可以解决的了。</li></ul></li><li><p>打印机故障</p><ul><li>在打印了一段时间之后停止工作，根据抓包发现tcp一段时间之后重传了，窗口满。</li><li>说明打印机除了问题，书中指出是打印机的内存出了问题。</li></ul></li><li><p>分公司之困</p><ul><li>dns查询一般是udp，但是当域传送备份的时候用tcp。（还有别的情况也是用tcp，<strong>待进一步研究</strong>。共同之处都是用服务器的53端口）</li><li>案例是子公司的pc要访问总公司的服务器，要用dns查询一下ip地址，但是没有返回。子公司的dns查询用子公司的dns服务器，子公司的dns服务器要和权威的总公司的dns服务器通信。但是总公司的防火墙配置了允许访问dns服务器的udp 53端口 但是不允许访问tcp的53端口。所以导致子公司的dns服务器不能和总公司的dns服务器通信，所以导致了问题。修改一下防火墙的配置即可解决问题。</li></ul></li><li><p>生气的开发者</p><ul><li>大量的数据在A和B之间传输的时候，B处将收到的数据插入进数据库。但是数据出了问题。有可能是传输过程中网路不好，有可能是程序员写的插入代码有问题。我们可以在B处抓取收集到的数据，看看是否和A处上传的md5值一样，若一样，则证明是程序员写的代码出错了。</li><li>查看Flow Graph发现用的是FTP的协议，在A处上传的时候，我们先查找上传的地方，看看文件名，生产过滤器 ftp.request.command=”STOR”，得到上传时的开始数据包，得到上传的文件名。在B处接收的时候，找到一个传输的数据包，Flow TCP Stream，然后获取save as文件名，看看md5是否相同。相同，则证明网络是好的，在B处成功的拿到了原始的数据，也就是开发者写的程序有问题。</li></ul></li></ul><p>-总结：能正确分析出原因的基础是理解各个协议的通信过程，了解正确时数据包的样子。</p><h2><a name="t17"></a>第九章 让网络不再卡</h2><pre><code><span style="font-family: 微软雅黑;">本章目标：网络卡是什么原因？如何解决？学习TCP的错误恢复和流量控制，学习如何网络慢的根源，了解基线测试。</span></code></pre><p>1.TCP协议允许我们执行回溯分析，不会产生额外的流量，ICMP会。</p><p>2.TCP的重传机制：TCP在发送一个数据包之后开始计时，第一次默认超过一个RTT就会重传。正常情况下，会根据之前发送的数据包的往返时间，计算出一个平均的RTO,如果超过RTO没有收到ACK,就会重传，再没有收到ACK,RTO则变成两倍。windows默认重传5次，<a href="http://lib.csdn.net/base/linux" style="color:#df3434; font-weight:bold;" target="_blank" title="Linux知识库">Linux</a>默认重传15次，均是可变的。重传的各个数据包之间除了identification和checksum不一致之外其它均一致。</p><p>3.TCP的重复确认：当接收端收到一个非预期的sequenceNum，也就是传输的tcp序号乱序了，那么就会回复一个ack，ack的值为需要的数据包的sequencenum的值。发送方连续收到三个ack的时候，就会停止一切传输，发送一个快速重传。</p><p>4.选择性ack：若开启选择性ack，也就是在快速重传之前，发送的数据包可以被保留，不需要再次重传。现在的TCP/IP协议栈都支持。</p><p>5.滑动窗口协议：滑动窗口协议体现了TCP的前瞻性。接收方通过控制ack包的窗口大小来告诉发送方下次发的数据包的量的大小。当窗口大小为0时，暂停传输。这时，发送方可以发送保活数据包来询问接收方是否可以继续发送，而接收方可以继续回复一个ack，窗口大小为0表示继续暂停传输。或者更新窗口大小继续传输。<br/><em>疑问是：为什么要发送保活数据包，直接等待接收方的ack不就可以了吗？暂时的解释：保活数据包是用来保证接收方的主机在线的，确保他处于一个繁忙的状态。</em></p><p>6.观察重传应该在客户端观察，服务端收不到数据包客户端才会重传。</p><p>7.可以把重复确认看作是重传的对立面，是从服务端的角度出发的，没有收到数据包就会重复确认发送ack，</p><p>8.出现零窗口，则可以确定是服务端出了问题。</p><p>9.如果没有明显的重传数据包或者是ACK数据包或者是零窗口数据包还可以根据时间来判断速度慢的原因：</p><ul><li>syn和syn/ack对client和server占用的资源很小，如果这两个包之间的时间很长，或者是接下俩服务端回复的ack都很慢，很可能是链路出了问题，可以检查链路过程中的防火墙，路由器，代理服务器等设备。</li><li>如果在三次握手之后，客户端若是一个http请求，发送get的时间和三次握手的最后一次握手相差时间很大，那很可能是客户端的出了问题，可能是应用层到传输层之间的问题。</li><li>如果是三次握手之后，客户端发送了get请求，服务端回复了ack，之后服务端应该发送数据，如果这段时间很长，那可能是服务端在发送数据段时候出了问题，涉及到服务端的http协议，问题在于服务器。</li></ul><p>10.网络基线是用来在出问题的时候,所有的努力都尝试过了，还可以和正常时候的流量做对照，防患于未然。</p><ul><li>站点基线<br/><ul><li>使用的协议</li><li>广播流量</li><li>身份验证序列</li><li>数据传播速率</li></ul></li><li>主机基线<br/><ul><li>查看主机所用的协议</li><li>繁忙空闲时候的流量</li><li>主机启动和关闭时的流量</li><li>身份验证序列</li><li>关联了哪些主机（sql服务器等等）</li></ul></li><li><p>应用程序基线</p><ul><li>使用的协议</li><li>启动和关闭时候的流量</li><li>关联和依赖</li><li>数据传输速率</li></ul></li><li><p>其它</p><ul><li>多个时间段创建基线</li><li>个人觉得基线没有多大用,现在觉得很难用到</li></ul></li></ul><h2><a name="t18"></a>第十章 安全领域的数据包分析</h2><p>1.抓包分析，可实现端口扫描：利用tcp的三次握手，结合conversation窗口查看packet包的数量来查看主机开放了哪些端口。</p><ul><li>原理：发送一个syn包，若收到几次ack证明端口开，若收到rst说明端口关，否则可能有防火墙或其它，不确定。</li><li>syn扫描的优点：快速可靠，准确和协议栈的实现无关，安静不容易被发现。</li><li>可以尝试用python写一个端口扫描器</li></ul><p>2.识别操作系统</p><ul><li><p>被动识别：根据数据包中的特相关域来判断（不通操作系统数据包某些位默认值不一样）</p><ul><li>ip头中的ttl windows默认128 linux默认64</li><li>tcp头 windows默认最长段1440 linux默认最长段146</li><li>相关软件：<a href="http://lcamtuf.coredump.cx/p0f.shtml/">p0f</a></li></ul></li><li><p>主动识别：主动发起特定的数据包，从响应中判断，不是隐蔽的，但是高效。</p><ul><li>参考：<code>《nmap networking scanning》</code></li></ul></li></ul><p>3.识别极光行动的流量，其间提到在span标签内用一个iframe内联帧达到不被用户发现的效果。</p><p>4.arp欺骗原理（arppoison是在受害者上抓包的）。感染过程：</p><ul><li>[1] 首先收到（ip未知）攻击者的询问：172.16.0.107的地址在哪儿 发送给 172.16.0.1</li><li>[2] 受害者回复自己的mac地址给攻击者</li><li>有疑问，不应该是回复给172.16.0.1吗？为什么回复给攻击者？是根据mac地址给的？那还要172.16.0.1干嘛？</li><li>[3] 攻击机发送一个未经请求的arp回应，更新受害者arp缓存表，更新172.16.0.1的mac地址</li><li>如果需要检测arp欺骗，可以配置IDS，或者要有检测MAC地址变化的软件</li></ul><p>5.CyberEYE是土耳其的工具，一种远程访问木马：Remote-access Trojan RAT</p><p>6.守护网络安全的人往往靠各种IDS,如果流量出发了IDS的签名，就会产生警报。</p><p>7.显示每个会话的初始syn数据包：(tcp.flags.syn ==1 ) &amp;&amp; (tcp.flags.ack==0) 可以给每个会话着色然后看会话之间的关系。结合各种图像显示，比如IO Graph。</p><p>8.跟踪TCP Stream还可以恢复出原始的图像，注意要用十六进制编辑器修改。可惜没成功。：(</p><h2><a name="t19"></a>第十一章 无线网络数据包分析</h2><p>1.wlan（无线局域网）遵循802.11标准，有11个信道可以用。一个无线ap一般工作在1 6 11 其中一个信道之上。若为其它的信道，在信道4上嗅探会获得5上的部分流量。如果想在多个信道上切换嗅探，可以使用<a href="http://www.kismetwireless.net/">Kisnet</a>,每秒跳跃10个信道，实现高效嗅探。同样，也可以用<a href="http://www.metageek.com/">metageek</a>公司的Wi-SPY USB硬件设备嗅探整个802.11频谱上的干扰，并用图形化显示分析。</p><p>2.无线网卡的四个工作模式：</p><ul><li>被管理模式 managed model ：无线ap和各个pc之间，各个pc的无线网卡驱动依赖无线ap完成通信</li><li>ad hoc模式：pc 和 pc之间</li><li>主模式 master model ：一台pc的网卡充当一个wap，为其它pc提供服务</li><li>监听模式 moniter model ：当一台pc用来做嗅探时，其网卡处于监听模式</li><li>用于做数据包分析的无线网卡：ALFA 1000mW USB</li></ul><p>3.windows嗅探无线数据包的工具：airpcap</p><p>4.linux上嗅探无线数据包:启用网卡的监听模式即可。命令 iwconfig</p><p>5.每一个WAP都有自己独特的BSS ID（基础服务设备识别码），每一个ap在其信道上可能有十几个客户端的流量。</p><p>6.无线网络安全</p><ul><li>加密方式：WEP(有线等效加密)、WPA（无线上网保护接入）、WPA2</li><li>又分析了下WEP、WPA的认证成功的数据包和失败的数据包，了解即可。</li></ul><h2><a name="t20"></a>附录A</h2><pre><code>介绍一些进一步的学习资源
</code></pre><p>1.另两种数据包分析工具：tcpdump 、windump（tcpdump的windows版本）</p><p>2.Cain&amp;Abel</p><p>3.<a href="http://lib.csdn.net/base/python" style="color:#df3434; font-weight:bold;" target="_blank" title="Python知识库">Python</a>的<a href="http://www.secdev.org/projects/scapy">scapy</a>可以实现创建和修改数据包</p><p>4.cloudhark 在线分享数据包的website</p><p>5.各种数据包的通信样例：pcapr，可以用来学习和分析不同的协议</p><p>6.tcpreplay 重传pacap里的数据包</p><p>7.数据包分析课程：<a href="http://www.sans.org/">SANS SEC 503: Instrusion Detection In-Depth</a></p><p>8.数据包相关的博客</p><ul><li>介绍一些有趣的流量分类：<a href="http://www.packetstan.com/">packetstan</a></li><li><a href="http://chrissanders.org/">作者的博客</a></li></ul></div><div><br/></div><div>9.<a href="http://www.wiresharktraning.com/">wireshark大学</a></div><div>10.<a href="http://wiki.wireshark.org/">官方wiki</a></div><div><br/></div><div><br/></div><div><a href="计算机网络_files/Wireshark_Display_Filters.pdf"><img src="计算机网络_files/4007d7321f42f3bf160bdd688716877d.png" alt="Wireshark_Display_Filters.pdf"></a><br/></div></span>
</div>
<hr>
<a name="440"/>

<div>
<span></span>
</div>
<hr>
<a name="458"/>

<div>
<span><div><a href="计算机网络_files/一站式学习Wireshark.pdf"><img src="计算机网络_files/4cb0f14df646e99d23db2fe22f3ba85a.png" alt="一站式学习Wireshark.pdf"></a><br/></div></span>
</div>
<hr>
<a name="564"/>

<div>
<span><div><a href="计算机网络_files/TCP协议疑难杂症全景解析.pdf"><img src="计算机网络_files/11224ec83d563438500bce9f8e5c660f.png" alt="TCP协议疑难杂症全景解析.pdf"></a><br/></div></span>
</div>
<hr>
<a name="619"/>

<div>
<span lang="zh-CN" style="font-family:Calibri;font-size:11.0pt"><div style="direction:ltr;border-width:100%"><div style="direction:ltr;margin-top:0in;margin-left:0in;width:9.4041in"><div style="direction:ltr;margin-top:0in;margin-left:.5402in;width:1.0562in"><p lang="en-US" style="margin:0in;font-family:&quot;Calibri Light&quot;;font-size:20.0pt">IPV6</p></div><div style="direction:ltr;margin-top:.0388in;margin-left:.5402in;width:1.9027in"><p style="margin:0in;font-size:10.0pt;color:#767676"><span style="font-family: Calibri">2016</span><span style="font-family:&quot;Microsoft YaHei&quot;">年</span><span style="font-family:Calibri">12</span><span style="font-family:&quot;Microsoft YaHei&quot;">月</span><span style="font-family:Calibri">12</span><span style="font-family:&quot;Microsoft YaHei&quot;">日</span></p><p style="margin:0in;font-family:Calibri;font-size:10.0pt;color:#767676">22:52</p></div><div style="direction:ltr;margin-top:.1666in;margin-left:.2493in;width:9.034in"><ul style="margin-left:.2902in;direction:ltr;unicode-bidi:embed;margin-top: 0in;margin-bottom:0in"><li style="list-style: none; display: inline"><p style="margin:0in;font-family:微软雅黑;font-size:12.0pt"><span style="font-weight:bold">前言：这里并不针对所有特定的实现或应用程序，也就是说并不能替代官方的产品说明</span></p><p style="margin:0in;font-family:&quot;Microsoft YaHei&quot;;font-size:11.0pt"> </p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">如何在</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">网络中断</span><span style="font-family:微软雅黑;font-size:10.5pt">时做出决策的《TCPIP用户手册》</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">以</span><span style="font-weight: bold;font-family:微软雅黑;font-size:10.5pt">管理</span><span style="font-family: 微软雅黑;font-size:10.5pt">的角度来审视Internet协议：如何工作、哪里会出现问题、将面临那些问题</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">标准化进程以及IP编址</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">使用一个开源的数据包分析软件、RFC文档</span></li></ul><p style="margin:0in;line-height:15pt;font-family:微软雅黑"><span style="font-size:12.0pt;color:#C00000">因</span><span style="font-size:10.5pt; color:black">：在修复之前，你必须先确切的知道故障问题是什么。连带关系-清楚这些产品的基础协议是如何实现产品功能的。</span></p><p style="margin:0in;line-height:15pt;font-family:微软雅黑"><span style="font-size:12.0pt;color:#C00000">先决条件</span><span style="font-size:10.5pt; color:black">：为了能够有效的设计、实现、管理、支持基于Internet、使用标准协议和服务的不同实现，你必须知道这些协议是如何工作的。</span></p><p style="margin:0in;line-height:15pt;font-family:微软雅黑"><span style="font-size:12.0pt;color:#C00000">果</span><span style="font-size:10.5pt; color:black">：所有的一切最终都归结于协议&lt;包括失败的命令和他们产生的错误&gt;；最快的解决途径还是需要理解协议层的工作过程；</span><span style="font-weight:bold;font-size:10.5pt;color:#002060">需要捕获网络中的通信量，更重要的是能够理解正在观察的包。</span></p><p style="margin:0in;line-height:15pt;font-family:微软雅黑"><span style="font-size:12.0pt;color:#C00000">体系</span><span style="font-size:10.5pt; color:black">：</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">在TCP/IP网络中使用的每一个</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">核心</span><span style="font-family:微软雅黑;font-size:10.5pt">协议的 </span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">设计背景，即协议简介</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">以Internet为核心的最常见 </span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">协议的选项和参数信息，即协议语法的细节</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">结合 </span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">协议分析器 </span><span style="font-family:微软雅黑;font-size:10.5pt">将有助于解决问题，</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">即一些实时用法和故障排除注意事项</span></li><li style="list-style: none; display: inline"><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="circle"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:#002060"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">理解协议报头的结构以及协议所能传输的信息类型，是理解协议工作的最好方式</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:#002060"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">理解协议结构不但有助于了解协议的最优配置以及选项信息，还在故障排查过程中识别故障源</span></li></ul></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:12.0pt;color:#C00000">做法：</p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">初学者：主要概念、结构、工作方式 &lt;1/2/7&gt;</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">工作中的管理员：对核心协议有深入的了解、</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">回头看参考资料和故障排除提示 </span><span style="font-family:微软雅黑;font-size:10.5pt">&lt;2/5/7&gt;</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">特定的某一协议或服务问题：捕获包、研究包、努力找到问题的出处；然后观察出现问题的包、在相应章节的参考部分找到相应的部分，看看是否明白问题的所在</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">解决问题的所有东西：体系、网络分析器、RFC文档</span></li></ul><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:12.0pt"><span style="color:#C00000">术语</span><span style="color:black">：</span></p><p style="margin:0in;font-family:微软雅黑;color:black"><span style="font-size: 13.5pt">   </span><span style="font-size:12.0pt">  </span><span style="font-size:10.5pt"> 大部分网络管理员用“包”或“数据报”来表示那些通过网络传输的数据；但是时日变迁用来描述特定协议的数据单元出现了很多词汇 ；即</span><span style="font-weight:bold;font-size:10.5pt">根据特定的协议定义了每个术语的用法</span><span style="font-size:10.5pt">。 </span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">帧</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">           基于某网络的链接层协议、通过该网络传输的数据单元；包括 链接层封装技术，如Ethernet II 帧、802.3 <span style="background:white">Ethernet帧、Token Ring 帧。</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">IP数据报</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">          基于 IP协议管理的数据单元；包括 传输的所有数据，还包括与这个数据相关的IP首部。实际上IP数据报就是IP工作的直接对象。</p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">IP包</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">          IP数据报的另外一个名称，但其往往指的是帧的数据报部分，而不是数据报整体。例如：收发系统能把一个IP数据报看做一个实体，但是为了在一系列中间网络上传输，这个数据报可能被分成多个IP包。</p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">          一般来说，主机处理 IP 数据报，而路由器处理 IP 包。</p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">消息</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">          从一个高层协议（如UDP或TCP）发送至IP的数据单元；包括传输的数据和与这个数据相关的特定传输首部；大多数情况下消息数据是由应用程序特定的协议产生的，但是ICMP、IGMP也可以直接与IP通信</p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">          因此也会产生消息数据。消息最终成为IP数据报的数据部分。</p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">TCP段</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">          虽然 TCP 产生的首部和数据被看做 消息，但TCP消息可以通过 多重消息来传播；在这种情况下，一般将消息看做段。</p><p style="margin:0in;font-family:&quot;Microsoft YaHei&quot;;font-size:11.0pt"> </p></li></ul></div><div style="direction:ltr;margin-top:.3298in;margin-left:.2048in;width:9.1993in"><ul style="margin-left:.3347in;direction:ltr;unicode-bidi:embed;margin-top: 0in;margin-bottom:0in"><li style="list-style: none; display: inline"><p style="margin:0in;font-family:微软雅黑;font-size:12.0pt"><span lang="en-US" style="font-weight:bold">IPv6</span> <span lang="zh-CN" style="font-weight:bold">编址</span></p><p style="margin:0in;font-family:&quot;Microsoft YaHei&quot;;font-size:11.0pt"> </p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">IPv4地址长度是32位，看起来都很相似；IPv6地址长度是128位，看起来差异很大。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">制定IPv6标准的出发点是 扩展地址空间，优化路由表。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">熟悉扩展后的地址空间，IPv6编址的工作方式，采取该编址体系的原因。</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"> </p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:12.0pt; color:#00B0F0"><span style="font-weight:bold;background:white">IPv6的地址空间</span></p><p style="margin:0in;line-height:15pt;font-family:Calibri;font-size:11.0pt"> </p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:black">前奏：</p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">32位的</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">IPv4地址空间理论上可以提供42.9亿个地址（无法为每一个人分配一个IP地址）；事实上IPv4的地址空间只有一部分可用（大量地址块没有考虑全球路由和地址节约的情况下就被分配出去且无法回收）。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">所以，目前全球只有14%的人口能够访问Internet。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">未来不仅用户和计算机需要地址，可Internet连接的各种设备也需要大量地址。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white"> IPv4地址空间最初定义了地址类型（A/B/C/D/E类）可以有2113389个网络；在引入CIDR（无类别域间路由），这个数字有一定扩展。  </span></li></ul><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:black"><span style="background:white">而128位的IPv6地址空间理论上可以为地球上的每一个沙子提供多个IP地址。</span></p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:#0070C0"><span style="font-weight:bold">地址类型</span></p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:black"><span style="background:white">IPv4有单播地址、广播地址和多播地址。IPv6以多播地址取代广播地址（广播对大多数网络来说都是一个需要解决的问题）。任播地址虽然在IPv4有所使用，但是在IPv6将在一个更大的范围内使用该类地址。</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">单播地址：可以唯一标识</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">IPv6的节点接口，发送到单播地址的数据包会被发送给该地址所标识的接口</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">多播地址：可以标识一组</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">IPv6的节点接口，发送到多播地址的数据包会被发送给多播组的全部成员</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">任播地址：该地址被分配给多个接口（通常位于多个节点上），但是发送给任播地址的数据包仅被其中的一个接口接收（通常是最近的一个接口）</span></li></ul><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:#0070C0"><span style="font-weight:bold">通用规则</span></p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:black">OSI模型是将地址分配给节点。而</p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">IPv4和IPv6是将地址分配给接口（一个节点的每个接口都至少需要一个单播地址）（一个节点可以由多个地址标识）</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">单个接口可以分配多个任意类型的</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">IPv6地址（单播，多播，任播）（一个节点可以由其任一个接口地址进行标识）</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">可以将一个单播地址分配给多个接口（出于负载共享的目的）（之前需确认硬件和软件是否支持该功能）</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">对于IPv6来说，（任何字段的全0和全1）地址都是合法值</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="background:white">从操作上来看，IPv4引入局部范围地址（通过使用私有地址空间中的IP地址或受限的划定范围的多播IP地址）。</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">而IPv6在设计之初就将地址范围纳入基本体系之中：支持不同范围的地址，包括全局范围和局部范围（如链路本地）。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">每个IPv6地址都有一个特定范围（需特殊指定）：该范围是一定的拓扑跨度。其中的IPv6地址可以用作某个/组接口的唯一标识符。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">地址的范围作为地址的一部分进行编码。</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:#0070C0"><span style="font-weight:bold">地址记法</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="background:white">IPv6地址有128位：可以划分为8个由冒号分隔的16位数段，而16位数段中每4位由一个16进制数代替。</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">为简化起见，可以采取某些简化表达形式</p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">16比特段中的前导0</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">必须忽略</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">0000必须由单个0替</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">代</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">双冒号必须替代</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">IPv6地址中连续的0（不只是一组0000，而是更多）（双冒号仅能在地址中出现一次）</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">使地址</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">尽可能得短</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">使用小写字母a,b,c,d,e,f（十六进制）</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">如果在</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">IPv6和IPv4的混合环境，还有一种便捷表达：将IPv4地址放到IPv6地址的4个低字节（如IPv4地址192.168.0.2可以表示为x:x:x:x:x:x:192.168.0.2或是0:0:0:0:0:192.168.0.2/::192.168.0.2/::C0A8:2）</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">如果‘IPv6地址+借口号’表示，最好的方式就是将IPv6地址放在方括号内，紧接着一个冒号和接口号：如[2001:db8::1]:80</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">多种表达方法会造成一定的混乱，所以确保每一次使用相同的格式来存储地址，且在自定义格式之前需要检测一下系统是否敏感。（当然最好的选项就是使用全格式）</p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:#0070C0"><span style="font-weight:bold">前缀记法</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="background:white">前缀记法与CIDR记法相似，即在地址后附加前缀长度（在斜线后面写上比特数）</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt"><span style="color:black;background:white">格式如下：</span><span style="font-weight: bold;color:#002060;background:white">IPv6地址/前缀长度（IPv6地址完整）</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">前缀长度指定了该地址最左侧的比特数以表示前缀，这是子网掩码的另一种表达形式。</p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">子网掩码指定了<span style="background:white">IPv4地址中属于网络ID的比特数。前缀用来标识接口所属的子网并由路由器进行转发。</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">压缩记法（以双冒号替代连续的0）也适应于前缀记法。使用时值得注意。</p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:#0070C0"><span style="font-weight:bold">全局路由前缀</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="background:white">全局路由前缀是IPv6地址中用来标识子网或特定地址类型的 </span><span style="font-weight:bold;background:white">高阶 </span><span style="background:white">比特。 可以说是官方规定的特殊前缀。</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:#002060"><span style="font-weight:bold">包括全局单播地址（001）、链路本地单播地址（1111 1110 10）、本地</span><span style="font-weight:bold;background:white">IPv6地址（1111 110）、私有管理地址（1111 1101）和多播地址（1111 1111）。</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">通过前缀即可区分单播地址和多播地址。全局单播地址的高阶字节总是以001开头，多播地址总是以高阶字节1111 1111开头。</p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">任播地址取自单播地址，因而无法从前缀上区分任播地址。如果将一个单播地址分配给多个接口，那么该地址即为任播地址（应对接口进行相应的配置）。</p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt"><span style="color:black">某些 </span><span style="font-weight:bold;color:#0070C0">特殊地址 </span><span style="color:black">从高阶前缀0000 0000 的保留地址空间进行分配。包括未指定地址、环回地址、内嵌</span><span style="color:black;background:white">IPv4地址的IPv6地址。</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="background:white">IANA目前仅从高阶前缀001的地址空间中进行分配。</span></p><p style="margin:0in;font-family:Calibri;font-size:11.0pt"> </p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:#0070C0"><span style="font-weight:bold">全局单播地址</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="font-weight:bold">格式见目录。</span>其中 1 全局路由前缀用于标识分配给站点的地址空间（由ISP分配）（采用分层结构）。2 子网ID用于标识站点内的链路，可以为一条链路分配多个子网ID（由站点本地管理员分配）。3 接口ID用于标识子网上的接口，必须在子网内唯一。</p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:#0070C0"><span style="font-weight:bold;background:white">任播地址</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="font-weight:bold;background:white">格式见目录。</span></p><p style="margin:0in;font-family:Calibri;font-size:11.0pt"> </p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:#0070C0"><span style="font-weight:bold">链路本地单播地址和站点本地IPv6地址</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="font-weight:bold;background:white">格式见目录。</span></p><p style="margin:0in;font-family:Calibri;font-size:11.0pt"> </p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:#0070C0"><span style="font-weight:bold">多播地址</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="font-weight:bold;background:white">格式见目录。</span></p><p style="margin:0in;font-family:Calibri;font-size:11.0pt"> </p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:#0070C0"><span style="font-weight:bold;background:white">特殊地址</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="font-weight:bold;background:white">格式见目录。</span></p><p style="margin:0in;font-family:Calibri;font-size:11.0pt"> </p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:#0070C0"><span style="font-weight:bold">必需地址</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="font-weight:bold">标准规定，每台主机为了标识自己都必须分配以下地址：</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">为每个接口分配的</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">本地</span><span style="font-family:微软雅黑;font-size:10.5pt">链路地址</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">为每个节点分配单播地址和任播地址</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">环回地址</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">全部节点多播地址</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">每对 单播和任播地址 所对应的 </span><span style="font-family:微软雅黑;font-size:10.5pt">请求节点多播地址</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">该主机所属其他多播组的多播地址</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:#0070C0"><span style="font-weight:bold">默认地址选择</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="font-weight:bold">ipv6的地址体系允许接口拥有多个地址。这些地址要么有不同的范围（本地链路和全局）或不同的状态（首选状态、废除状态），要么是移动环境下的地址（家乡地址或转交地址）或多归属环境下的地址，要么是永久公有地址或虚拟隧道接口。</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="font-weight:bold">由于双栈主机同时拥有</span><span style="font-weight:bold; background:white">ipv6和ipv4地址，因而相应的ipv6实现在发起连接时通常需要在多个源地址和目的地址之间做出选择。在未来ipv6和ipv4共存的时代（纯ipv6、纯ipv4，双栈网络）必须要处理的应用场景和选择：</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">当客户端收到（全局<span style="background:white">ipv6地址和公有ipv4地址共存）消息。若客户端有私有ipv4地址和全局ipv6地址，那么客户端就有可能使用ipv6来访问该外部服务；若客户端有公有ipv4地址和本地链路ipv6地址，那么客户端就有可能使用ipv4来访问外部服务。</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">当然，具体的处理方式因网络的实现情况而定。意识到这一点并提供相应的处理机制，保证应用程序在各种环境中能够执行最优操作。</p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="font-weight:bold">定义两种通用算法，分别用于源地址和目的地址的选择。所有的节点（主机和路由器）都必须使用该算法。</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="font-weight:bold">算法指定了</span><span style="font-weight:bold;background: white">ipv6节点的默认行为，但是其并不影响 应用程序和上层协议所作出的选择。</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="font-weight:bold">最重要的规则如下：</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">优选范围相同的地址对/源地址和目的地址（比如本地链路或全局）</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">优选范围较小的目的地址</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">优选处于首选状态的地址</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">若有纯</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">ipv6地址，那么就不使用过渡地址（比如ISATAP或6to4地址）</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">若前面所有的准则都相同，那么优选前缀最长的地址对</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">对于源地址来说，全局地址由于临时地址</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">在移动IP的环境中，家乡地址由于转交地址</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="font-weight:bold">当然，可以通过配置一定的策略来改写前述的优选方式。</span></p><p style="margin:0in;font-family:Calibri;font-size:11.0pt"> </p><p style="margin:0in;font-family:Calibri;font-size:11.0pt"> </p><p style="margin:0in;font-family:微软雅黑;font-size:12.0pt"><span lang="en-US" style="font-weight:bold">IPv6</span> <span lang="zh-CN" style="font-weight:bold">协议结构</span></p><p style="margin:0in;font-family:微软雅黑;font-size:12.0pt"> </p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;color:black;background:white">IPv6报头首部比IPv4更加简练，使处理效率更高。</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:#1F497D; background:white">数据包的报头越简单，网络的处理速度就越迅速。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;color:black;background:white">将</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:#1F497D; background:white"> IP选项</span><span style="font-family:微软雅黑; font-size:10.5pt;color:black;background:white"> 归为 </span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:#1F497D; background:white">扩展报头</span><span style="font-family:微软雅黑;font-size: 10.5pt;color:black;background:white">，可以使“协议扩展”更为灵活。其中 </span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:#1F497D; background:white">扩展报头 </span><span style="font-family:微软雅黑; font-size:10.5pt;color:black;background:white">位于IP报头和TCP/UDP报头之间，即IP报头和上层协议报头之间。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;color:black;background:white">IPv6 </span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:#1F497D; background:white">报头长度 </span><span style="font-family:微软雅黑; font-size:10.5pt;color:black;background:white">固定为40字节（不含扩展报头）。其中 源地址和目的地址字段各占16字节，</span><span style="font-weight:bold;font-family:微软雅黑; font-size:10.5pt;color:#1F497D;background:white">通用报头信息</span><span style="font-family:微软雅黑;font-size:10.5pt;color:black;background:white">只有8字节（非常适合流水化处理）。</span></li></ul><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:12.0pt; color:#C00000">通用报头结构</p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:black"><span style="background:white">IPv6删除了IPv4报头中以下5个字段</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">报头长度（Header Length）：</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">IPv6采用定长报头，扩展报头独立计算</span></li></ul><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:#0070C0"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">分段/重组操作：在某个数据包丢失或出现错误的情况下，必须重传所有的数据包，因此效率较为低下</span></li><li style="list-style: none; display: inline"><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="circle"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:#00B050"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;background: white">IPv6：主机可以利用 ‘Path MTU Discovery’（ICMP 进程）来得到 可能路径上的MTU ；如果发送端 IPv6主机 根据需要 对数据包进行分段，那么插入相应的扩展报头即可，路由器并不必执行分段操作；术语数据报与数据包的界限又拉近了一步。</span></li><li style="list-style: none; display: inline"><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">标识符（Fragment Identifier）</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">标志（</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">Fragment Flags</span><span style="font-family:微软雅黑;font-size:10.5pt">）</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">偏移（</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">Fragment Offset</span><span style="font-family:微软雅黑;font-size:10.5pt">）</span></li></ul></li></ul></li></ul><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">校验和（Header Checksum）：删除的目的在于 提高路由器的处理速度</span></li><li style="list-style: none; display: inline"><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="circle"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;color:black">相应的强化：‘介质访问层面的校验和’- 使数据包‘未被检测到的错误’和‘被错误路由’的概率大大减小；‘传输层（TCP/UDP）的校验和’- 使</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:#1F497D"> UDP检验和 </span><span style="font-family:微软雅黑;font-size:10.5pt;color:black">由可选项变成强制项。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;color:black">由于IP本身</span><span style="font-family:微软雅黑;font-size:10.5pt;color:black;background:white">仅</span><span style="font-family:微软雅黑;font-size:10.5pt;color:black">是一种传输的协议，上层协议（TCP/UDP）有责任确保 数据包的‘完整性’。所以 </span><span style="font-weight:bold;font-family:微软雅黑; font-size:10.5pt;color:#1F497D">与其对TCP/UDP持有半信半疑的态度，但不如完全信任它们就好。</span></li></ul></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="background:white">IPv6更新了IPv4报头中以下4个字段</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">使用‘流量类型（Traffic Class）字段' 替换 'ToS（Type of Serive）字段'；</span><span style="font-family:微软雅黑;font-size: 10.5pt;background:white">IPv6采用了不同的实现机制来处理性能问题。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">IPv4报头中的‘协议类型字段’和‘TTL（生存时间、Time-to-Live）字段’都被更名 '下一报头（Next Header）'  和  '跳数限制（Hop Limit）' 且功能上做出少量修改。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">IPv6还增加了  '流标签（Flow Label）字段'。</span></li></ul><p style="margin:0in;line-height:15pt;font-family:Calibri;font-size:11.0pt"> </p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:12.0pt; color:#C00000"><span style="background:white">IPv6基本报头字段</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">版本（Version，4位）：协议的版本，对于</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">IPv6来说该值始终为6</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">流量类型（8位）： 发送主机和转发路由器  可以通过该字段区分 </span><span style="font-family:微软雅黑;font-size:10.5pt; background:white">IPv6的优先级或不同服务类型；并增强对  '实时数据'  和  '任何需要特殊处理数据'  的处理能力</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">流标签（20位）：区分‘需要相同处理方式的数据包’-以提高路由器的处理效率；并增强对实时流量的处理能力（实际上，IPv4采用选项形式即‘路由器警报’来完成这一过程）</span></li><li style="list-style: none; display: inline"><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="circle"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">发送端主机可以使用一组 </span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">选项 </span><span style="font-family:微软雅黑;font-size:10.5pt">来标识该数据包（流）</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">路由器则跟踪流，并处理属于同一个流的数据包</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">在此期间，路由器不需要处理/解析每个数据包的报头信息。</span></li><li style="list-style: none; display: inline"><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">流标签和源地址 可以唯一的表示某个流；所有属于同一个流的数据包都有 相同的源地址和目的地址</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">不支持‘流标签字段’的节点在转发数据包时必须 </span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;background: white">不加改变 </span><span style="font-family:微软雅黑;font-size:10.5pt; background:white">的传递该字段，并在收到数据包时 </span><span style="font-weight: bold;font-family:微软雅黑;font-size:10.5pt;background:white">忽略 </span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">该字段</span></li></ul></li></ul></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">净荷长度（16位）：</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">IPv6报头/首部后面携带数据的长度，包括扩展报头。由于净荷字段长度有限（64KB、2字节），故 IPv6定义了一个‘巨包扩展报头’以支持更大的数据包。该功能仅在出现支持大于64KB的MTU链路时才使用。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;color:black">下一报头（8位）：包含</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:#1F497D">TCP/UDP等协议类型值</span><span style="font-family:微软雅黑;font-size:10.5pt;color:black"> 和</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:#1F497D"> </span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:#1F497D; background:white">扩展报头的报头类型值</span></li><li style="list-style: none; display: inline"><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="circle"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:#E36C09"><span style="font-family:微软雅黑;font-size:10.5pt">如果下一报头是TCP/UDP，则该字段将包含和 </span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">IPv4相同的数值。如TCP协议值为6、UDP协议值为17</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:#E36C09"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">如果扩展报头和 IPv6基本报头结合使用，那么下一报头则包含下一扩展报头的类型</span></li></ul></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">跳数限制（8位）：</span><span style="font-family:微软雅黑;font-size:10.5pt;background:white">IPv6仅将该字段单位视为跳数，而不是秒数；但 IPv4则二者兼容。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">源地址（16字节、128位）</span></li></ul><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:#E36C09"><span style="font-family:微软雅黑;font-size:10.5pt">目的地址（16字节、128位）：该字段可以是‘最终目的地的IP地址’，也可以是‘其他地址’。比如下一报头中有路由扩展报头（43），那么该地址就是下一跳路由器的IP地址</span></li></ul><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:12.0pt; color:#C00000"><span style="font-weight:bold">扩展报头</span></p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt"><span style="font-weight:bold;color:#1F497D;background:white">IPv4选项</span><span style="color:black;background:white"> 在实际应用中极少使用，因为会产生性能问题。</span></p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt"><span style="color:black;background:white">IPv6 则精简了这个问题：使用 </span><span style="font-weight:bold;color:#1F497D;background:white">扩展报头 </span><span style="color:black;background:white">来代替 </span><span style="font-weight: bold;color:#1F497D;background:white">选项</span><span style="color:black; background:white">，且只有在 </span><span style="color:#1F497D;background: white">需要</span><span style="font-weight:bold;color:#1F497D;background:white">选项 </span><span style="color:black;background:white">的时候才插入 </span><span style="font-weight:bold;color:#1F497D;background:white">扩展报头。</span></p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:black"><span style="background:white">    即 IPv6 可以没有扩展报头，也可以有一个或多个扩展报头。</span></p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt"><span style="color:black;background:white">IPv6定义了6种扩展报头</span><span style="font-weight:bold;color:#00B0F0;background:white">（蓝字）</span><span style="color:black;background:white">。如果某个数据包使用多个扩展报头，那么应遵循以下</span><span style="font-weight:bold;color:black;background:white">报头顺序</span><span style="color:black;background:white">：</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">IPv6 基本报头</span></li></ul><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:#0070C0"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">逐跳选项报头</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:#0070C0"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">目的选项报头（用于说明 </span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;background: white">IPv6 基本报头所指定的目的地址字段，或 路由报头 所列出的后续目的地址字段</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">）</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:#0070C0"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">路由报头</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:#0070C0"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">分段报头</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:#0070C0"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">认证报头</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:#0070C0"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">加密安全净荷报头</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:#0070C0"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">目的选项报头（</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;background: white">仅</span><span style="font-weight:bold;font-family:微软雅黑;font-size: 10.5pt">用于说明 数据包最终目的地字段）</span></li></ul><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">上层协议报头</span></li><li style="list-style: none; display: inline"><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="circle"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:black">有一个有趣的现象</span><span style="font-family:微软雅黑;font-size:10.5pt;color:black">：如果将 </span><span style="font-family:微软雅黑;font-size:10.5pt;color:black;background:white">IPv6 视为一种上层协议的话，那么该上层协议报头是可以包含另一个（ IPv6 基本报头，且遵循上述规则的扩展报头）的。</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:#002060; background:white">也就是说，IPv6协议是可以进行嵌套的。故这种情况主要应用于将 IPv6 封装到 IPv4 的情形下。</span></li></ul></li></ul><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:12.0pt; color:black"><span style="background:white">注意事项</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;color:black">每个 </span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:#002060">扩展报头的长度 </span><span style="font-family:微软雅黑;font-size:10.5pt;color:black">均是8字节（整数倍），对齐之用</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;color:black">每个扩展报头都是由 ‘</span><span style="font-family:微软雅黑;font-size:10.5pt;color:#002060">前一个报头中的下一报头字段</span><span style="font-family:微软雅黑;font-size:10.5pt;color:black">’标识的</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;color:black">只有</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:#002060"> </span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:#002060; background:white">IPv6 基本报头中的目的地址</span><span style="font-family:微软雅黑; font-size:10.5pt;color:#002060;background:white">字段</span><span style="font-family:微软雅黑;font-size:10.5pt;color:black;background:white"> 标识的节点 才可以检查或处理扩展报头（但对于逐跳选项字段来说是一个例外）。</span><span style="font-weight:bold; font-family:微软雅黑;font-size:10.5pt;color:red;background:white">这也说明了目的地址字段是选择性的标识一定的节点，并不是所有的路由器都会被目的地址字段标识。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;color:black;background:white">如果</span><span style="font-family:微软雅黑;font-size:10.5pt;color:#002060;background:white"> 目的地址字段所指向的地址 </span><span style="font-family:微软雅黑;font-size:10.5pt;color:black;background:white">是 </span><span style="font-family:微软雅黑;font-size:10.5pt;color:#002060;background:white">多播地址</span><span style="font-family:微软雅黑;font-size:10.5pt;color:black;background:white">，那么就意味着该多播组的全部节点都要检查并处理这些扩展报头</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;color:black">如果节点需要处理下一报头但又无法识别下一报头字段中的值，那么就需要 </span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:#002060">丢弃该数据包并发送ICMPv6“参数问题”消息</span></li></ul><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:12.0pt; color:black">逐跳选项报头</p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt"><span style="font-weight:bold;color:#002060">逐跳选项报头作为“</span><span style="font-weight: bold;color:#002060;background:white">选项”-扩展报头，</span><span style="font-weight: bold;color:#002060">必须由数据包传输路径上的所有节点检查或处理。</span><span style="color:black">其必须紧跟IPv6基本报头之后，通过下一报头字段值0来标识。路由器告警选项使用逐跳选项报头。</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">IPv4：路由器确定是否 </span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">需要检查数据包 </span><span style="font-family:微软雅黑;font-size:10.5pt">的唯一方法就是 </span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">至少要部分解析所有数据包的上层数据。该进程会明显降低路由器的处理速度。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">IPv6</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">：</span><span style="font-family:微软雅黑;font-size:10.5pt">如果没有逐跳选项报头，那么路由器就无需处理特定路由信息并将数据包直接路由到最终目的地如果有逐跳选项报头，那么路由器只需检查该逐跳选项报头，而无需进一步检查该数据包的上层信息。</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:12.0pt;color:black">路由报头</p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt"><span style="font-weight:bold;color:#002060">路由报头的作用是记录并给出‘数据包到达目的地之前’需要访问的一个或多个中间节点‘列表’。</span><span style="color:black">在IPv4中将其称为‘松散源路由选项’。而路由报头是通过前一个报头中的下一报头值43来标识的。</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">如果节点在处理</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">路由报头</span><span style="font-family:微软雅黑;font-size:10.5pt">时无法识别</span><span style="text-decoration:underline;font-family:微软雅黑;font-size:10.5pt">路由类型</span><span style="font-family:微软雅黑;font-size:10.5pt">值，那么所采取的措施就取决于</span><span style="text-decoration:underline;font-family:微软雅黑;font-size:10.5pt">剩余段</span><span style="font-family:微软雅黑;font-size:10.5pt">中的信息。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">如果</span><span style="text-decoration:underline;font-family:微软雅黑;font-size:10.5pt">剩余段</span><span style="font-family:微软雅黑;font-size:10.5pt">中没有包含任何需要访问的节点，那么该节点就必须忽略</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">路由报头</span><span style="font-family:微软雅黑;font-size:10.5pt">并处理数据包的</span><span style="text-decoration:underline;font-family:微软雅黑;font-size:10.5pt">下一报头</span><span style="font-family:微软雅黑;font-size:10.5pt">（由下一报头字段值指定）。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;color:black">如果剩余段不为0，那么该节点就必须丢弃该数据包并向数据包的源地址发送一条代码为0的ICMP参数问题消息，</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:#002060">表示无法识别路由类型</span><span style="font-family:微软雅黑;font-size:10.5pt;color:black">。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;color:black">如果转发节点因下一条链路的</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:#002060">MTU过小</span><span style="font-family:微软雅黑;font-size:10.5pt;color:black">而无法处理该数据包，那么就丢弃该数据包并向数据包的源地址发送一条ICMP数据包过大的消息</span></li></ul><ol style="margin-left:0in;direction:ltr;unicode-bidi:embed;margin-top: 0in;margin-bottom:0in;font-family:微软雅黑;font-size:10.5pt;font-weight:normal; font-style:normal" type="1"><li style="margin-top:0;margin-bottom:0;vertical-align:middle; color:black" value="1"><span style="font-family:微软雅黑;font-size:10.5pt;font-weight: normal;font-style:normal;font-family:微软雅黑;font-size:10.5pt">处理路由报头的第一个节点就是IPv6报头中</span><span style="font-family:微软雅黑;font-size:10.5pt;font-weight:normal;font-style: normal;text-decoration:underline;font-family:微软雅黑;font-size:10.5pt">目的地址字段</span><span style="font-family:微软雅黑;font-size:10.5pt;font-weight:normal;font-style: normal;font-family:微软雅黑;font-size:10.5pt">所标识的节点。该节点会将剩余段减1，并将路由报头中的下一报头字段插入IPv6报头</span><span style="font-family:微软雅黑;font-size:10.5pt;font-weight:normal;font-style: normal;font-family:微软雅黑;font-size:10.5pt;background:white">中</span><span style="font-family:微软雅黑;font-size:10.5pt;font-weight:normal;font-style: normal;font-family:微软雅黑;font-size:10.5pt">的目的地址字段，然后将该数据包转达到下一跳。之后继续按照前面的方法来处理路由报头，直到到达目的地。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">最终的目的地是‘路由报头的特定类型数据字段’中的最后一个地址。</span></li></ol><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:12.0pt; color:black">分段报头</p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt"><span style="font-weight:bold;color:#002060">IPv6主机在向</span><span style="font-weight: bold;color:#002060;background:white">IPv6目的端发送数据包时，使用‘路径MTU发现机制’来确定可以发送的最大数据包尺寸。如果所要发送的数据包大于该路径上所支持的MTU，那么源主机就要对数据包进行分段。</span><span style="color:black;background:white">不同于IPv4，路由器是不会执行分段操作的。而源主机执行分段操作，目的主机执行重组操作。分段报头是由前一个报头中的下一报头值44来标识的。</span></p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:black">最初未被分段的数据包称为原始数据包。</p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">原始数据包中不可分段的部分：IPv6基本报头和需要由路径上的所有节点处理的扩展报头（如逐跳选项报头）。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">原始数据包中可以分段的部分：仅需最终目的端处理的扩展报头、上层报头和数据部分。</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">原始数据包的不可分段部分平等的出现在每一个分段中，后面是分段报头和可以分段的数据。原始数据包的IPv6基本报头也要做出少量修改，因为此时的长度是分段后的长度（不包括IPv6基本报头，变大），而不再是原始数据包的长度。</p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:black">目的节点收集到所有的分段之后需要重组它们。为了实现正确重组，所有分段都必须有<span style="font-weight: bold">相同的源地址，目的地址和标识符值。</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">如果在收到第一个分段之后60秒内还没有收到全部分段，那么目的节点就会丢弃所有的分段数据包。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">如果目的节点收到了第一个分段（偏移量为0），那么就会向源端发送‘ICMPv6分段重组超时‘消息。</span></li></ul><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:12.0pt; color:black">目的选项报头</p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt"><span style="font-weight:bold;color:#002060">目的选项报头携带的选项信息 仅由目的节点（由</span><span style="font-weight:bold;color:#7030A0">IPv6基本报头中目的地址字段</span><span style="font-weight:bold;color:#002060">所指定）进行检查并处理</span><span style="color:black">。</span></p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:black">目的选项报头是由下一报头字段值60所指定。如前所述，一个<span style="background:white">IPv6包中可以出现</span><span style="font-weight:bold;background:white">两次</span><span style="background: white">目的地址选项报头。</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">如果在 路由报头 之前插入 目的选项报头 ，那么所携带的选项信息需要由 路由报头 中所列出的路由器进行处理。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">如果在 上层协议报头 之前插入 目的选项报头 ，那么所携带的选项信息就由 该数据包的最终目的端 进行处理。</span></li></ul><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:12.0pt; color:black">新型扩展报头格式</p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt"><span style="color:black;background:white">在数据包传输路径上有很多设备，比如路由器，防火墙等等。</span><span style="font-weight:bold;color:black;background:white">习惯上它们在一定网速下会执行分析过去性能和</span><span style="font-weight:bold;color:#00B0F0;background:white">忽视扩展报头</span><span style="font-weight:bold;color:black;background:white">的工作。如上所述，像逐跳选项报头和路由报头一样，</span><span style="font-weight:bold;color:#00B0F0;background:white">扩展报头经常只会被最终的目的端处理</span><span style="font-weight:bold;color:black;background:white">。</span></p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:black"><span style="background:white">为了适应真实世界的实现、优化扩展报头处理和检查进程，又定义了一个新型的扩展报头格式。</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">下一报头</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">报头扩展长度</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">报头特定数据</span></li></ul><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:#002060"><span style="font-weight:bold;background:white">如上所述的基本扩展报头的格式没有改变，只是在未来的新型扩展报头上会采用。在一些设备上，这两种格式都是适用的。</span></p></li></ul></div><div style="direction:ltr;margin-top:35.8881in;margin-left:.2048in;width:6.4395in"><ul style="margin-left:.3347in;direction:ltr;unicode-bidi:embed;margin-top: 0in;margin-bottom:0in"><li style="list-style: none; display: inline"><p style="margin:0in;font-family:微软雅黑;font-size:12.0pt"><span style="font-weight:bold">术语列表</span></p><p style="margin:0in;font-family:Calibri;font-size:11.0pt"> </p><ol style="margin-left:0in;direction:ltr;unicode-bidi:embed;margin-top: 0in;margin-bottom:0in;font-family:微软雅黑;font-size:10.5pt;font-weight:normal; font-style:normal" type="1"><li style="margin-top:0;margin-bottom:0;vertical-align:middle; color:black" value="1"><span style="font-family:微软雅黑;font-size:10.5pt;font-weight: normal;font-style:normal;font-family:微软雅黑;font-size:10.5pt;background: white">令牌环网（Token Ring）是一种</span><span style="font-family:微软雅黑; font-size:10.5pt;font-weight:bold;font-style:normal;font-weight:bold; font-family:微软雅黑;font-size:10.5pt;background:white"> LAN 协议</span><span style="font-family:微软雅黑;font-size:10.5pt;font-weight:normal;font-style: normal;font-family:微软雅黑;font-size:10.5pt;background:white">，其中所有的工作站都连接到一个环上，每个工作站只能同直接相邻的工作站传输数据。通过围绕环的令牌信息授予工作站传输权限。</span></li></ol><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">IEEE 802.5 中定义的令牌环源自 IBM 令牌环 LAN 技术。两种方式都基于令牌传递（Token Passing）技术。虽有少许差别，但总体而言，两种方式是相互兼容的。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">令牌环网（Token Ring）适合于低速网络，光纤分布式数据接口（FDDI）适合于高速网络</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">    2. 以太网(Ethernet)指的是由Xerox公司创建并由Xerox、Intel和DEC公司联合开发的<span style="font-weight:bold">基带局域网规范</span>，是当今现有局域网采用的最通用的通信协议标准。</p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">以太网络使用CSMA/CD（载波监听多路访问及冲突检测）技术，并以10M/S的速率运行在多种类型的电缆上。以太网符合IEEE802.3系列标准。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">包括标准的以太网（10Mbit/s)、快速以太网（100Mbit/s）和10G（10Gbit/s）以太网。</span></li></ul><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:black">         【TCPIP--网络拓扑层次】</p></li></ul></div><div style="direction:ltr;margin-top:.3736in;margin-left:0in;width:6.6444in"><img src="计算机网络_files/Image.png" type="image/png" height="960" width="638"/><br/><img src="计算机网络_files/Image [1].png" type="image/png" height="960" width="638"/><br/><img src="计算机网络_files/Image [2].png" type="image/png" height="960" width="638"/><br/><img src="计算机网络_files/Image [3].png" type="image/png" height="754" width="638"/><br/></div></div></div><div><p style="margin:0in"> </p><p style="text-align:left;margin:0in;font-family:Arial;font-size:9pt; color:#969696;direction:ltr">已使用 Microsoft OneNote 2016 创建。</p></div></span>
</div>
<hr>
<a name="626"/>

<div>
<span lang="zh-CN" style="font-family:Calibri;font-size:11.0pt"><div style="direction:ltr;border-width:100%"><div style="direction:ltr;margin-top:0in;margin-left:0in;width:9.0034in"><div style="direction:ltr;margin-top:0in;margin-left:0in;width:1.6631in"><p style="margin:0in;font-family:&quot;Microsoft YaHei&quot;;font-size:20.0pt">流量工程</p></div><div style="direction:ltr;margin-top:.0388in;margin-left:0in;width:1.9027in"><p style="margin:0in;font-size:10.0pt;color:#767676"><span style="font-family: Calibri">2016</span><span style="font-family:&quot;Microsoft YaHei&quot;">年</span><span style="font-family:Calibri">12</span><span style="font-family:&quot;Microsoft YaHei&quot;">月</span><span style="font-family:Calibri">12</span><span style="font-family:&quot;Microsoft YaHei&quot;">日</span></p><p style="margin:0in;font-family:Calibri;font-size:10.0pt;color:#767676">22:53</p></div><div style="direction:ltr;margin-top:.2243in;margin-left:0in;width:9.0034in"><p style="margin:0in;font-family:微软雅黑"><span style="font-weight:bold; font-size:14.0pt;background:white">因：</span><span style="font-size:11.0pt; background:white">这部分讨论数据的采集和存储</span></p><p style="margin:0in;font-family:微软雅黑;font-size:13.5pt;color:#C00000">        </p><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:12.0pt">高效的安全分析需要从</span><span style="font-weight:bold;font-family:微软雅黑;font-size:12.0pt">多</span><span style="font-family:微软雅黑;font-size:12.0pt">个不同的</span><span style="font-weight:bold;font-family:微软雅黑;font-size:12.0pt">来源</span><span style="font-family:微软雅黑;font-size:12.0pt">采集数据，每个来源都提供网络上发生特定事件全貌的一部分；即数据不能说话与重现会话。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:12.0pt">数据驱动分析的核心问题是：必须采集足够的数据才能重现少数事件，但是又不能采集过多的数据，使得查询无法进行；即采集到有意义的数据很难，而且只有少数流量才是真正的安全威胁；少数的安全攻击中大部分是很愚蠢的，只有一少部分则代表真正的威胁。</span></li><li style="list-style: none; display: inline"><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="circle"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:12.0pt">结：从多个来源采集数据会造成冗余</span></li><li style="list-style: none; display: inline"><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:12.0pt">数据分析少不了I/O，包括定位正确的数据，然后提取。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:12.0pt">数据搜索会占用大量的查询时间，数据存储会占用大量的磁盘空间</span></li></ul></li></ul></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:14.0pt"><span style="font-weight: bold">果：</span></p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:12.0pt; color:black">    精心设计的存储和查询系统可以实现对数据的任何查询，且在合理的时间内。良好的设计元素：</p><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:12.0pt">理解不同的传感器采集数据的方法，包括相互补充、复制、干扰。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:12.0pt">高效的存储数据以便查询的方法，包括数据库、大数据技术。</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:12.0pt;color:black"> </p><p style="margin:0in;font-family:微软雅黑;font-size:14.0pt;color:black"><span style="font-weight:bold">背景：</span></p><p style="margin:0in;font-family:微软雅黑;font-size:14.0pt;color:black"> </p><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">传统的入侵检测和日志文件分析捉襟见肘；网络（大）流量数据集的采集、分析技术、工具在定位和处理网络问题、运行安全上崭露头角。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span lang="zh-CN" style="font-family:微软雅黑;font-size:10.5pt">收集和组织数据的过程、各种分析工具、多种不同的分析场景和技术</span><span lang="en-US" style="font-family:微软雅黑;font-size:10.5pt">-合并这些过程你所得到的就是可操作信息</span><span lang="zh-CN" style="font-family:微软雅黑;font-size:10.5pt">。</span></li></ul><p style="margin:0in;font-family:Calibri;font-size:11.0pt"> </p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">主旨：监控、研究网络、使用研究结果改进网络安全。“安全”的量化说法即姿态感知：</p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span lang="zh-CN"><span style="mso-spacerun:yes">        </span> 了解你展开行动的环境：理解网络的组成结构，以及这些组成部分的使用方式。这和网络的配置、原始设置方式</span><span lang="en-US">有根本的不同。</span></p><p style="margin:0in;font-family:Calibri;font-size:11.0pt"> </p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span lang="zh-CN">主题：采集和研究网络上的数据、理解网络上的使用情况、重点在于分析</span><span lang="en-US">-做出可操作决策。</span></p><p style="margin:0in;font-family:Calibri;font-size:11.0pt"> </p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span lang="zh-CN">可操作：安全决策实际上是对行为的限制。所有的安全系统最终都依赖于用户对安全重要性的认识，以及对行为限制的</span><span lang="en-US">接受。</span></p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span lang="zh-CN"><span style="mso-spacerun:yes">            </span> 安全取决于人：</span><span lang="en-US">&lt;可否对人的行为进行预测，以作为对评估的补充？&gt;</span></p><p lang="en-US" style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"> </p><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">系统用户对规则的遵守</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">分析人员和监控人员在规则破坏时发现并解决</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span lang="zh-CN" style="font-family:微软雅黑;font-size:10.5pt">安全几乎不是一个技术问题</span><span lang="en-US" style="font-family:微软雅黑;font-size:10.5pt">-而是有创意的违规使用技术</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">而你所观察的目标不仅知道自己正在被监视，而且还会尽一切可能阻止这种监视</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"> </p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">焦点：理解网络结构、可操作性决策</p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">重点：实现辨别恶意行为的机制</p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span lang="zh-CN">最有效的手段：只</span> <span lang="en-US">加固和防护你 必须 要加固和防护的东西<span style="mso-spacerun:yes">         </span></span></p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:black"> </p><p style="margin:0in;font-family:微软雅黑;font-size:14.0pt;color:black"><span style="font-weight:bold;background:white">流量工程：</span></p><p style="margin:0in;font-family:微软雅黑;font-size:14.0pt;color:black"> </p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt"><span style="color: black">Internet服务提供商面临的挑战主要来自于如何使他们的客户满意并保持高速增长。首先，也是最基本的要求，ISP需要在一定地域内提供许多具有不同带宽的线路。换句话说，</span><a href="http://baike.baidu.com/view/855.htm">I</a><span style="color:black">SP必须配置一个能够使他们的客户连接到他们网络上的物理拓扑结构。在网络部署完毕后，ISP必须</span><span style="font-style:italic;color:red">将客户的业务流映射到网络的物理拓扑上，同时</span><span style="font-style:italic;color:red;background:white">绕过网络中已知的瓶颈和阻塞点。</span></p><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">高效的信息监控是基于</span><span style="font-weight:bold;font-style:italic;font-family:微软雅黑;font-size:10.5pt">多个传感器所采集的不同类型的数据；可以说从网络分流器到防火墙日志的任何东西</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">传感器能够采集有关网络的信息，可以用来对网络的安全性做出判断</span></li></ul><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:12.0pt; color:red">构建一个实用的传感器系统，必须在完整性和冗余性上取得平衡。 完美的传感器系统应该是完整且无冗余的：</p><ul style="margin-left:.75in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="circle"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">完整：每个事件都得到有意义的描述</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">无冗余：传感器不会重复事件的相关信息</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="font-style:italic">      可以说，它们有一定的评估效果，对于构建一个“监控解决方案”来说。</span></p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:red"><span style="font-style:italic">传感器的局限性</span></p><ul style="margin-left:.75in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="circle"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">基于网络的传感器：提供广泛的覆盖范围、（可能受到流量工程的限制，无法描述加密流量）、粗略的估计主机上的活动</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">基于主机的传感器：仅对特定的现象提供精确的信息</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:red"><span style="font-style:italic">传感器的分类（有效组合）</span></p><ul style="margin-left:.75in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="circle"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">观察点：传感器在网络中的，位置对数据采集的影响-不同观察点即是同一个事件的不同部分</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">领域：传感器提供的信息，如主机、主机上的服务、网络的信息-同一个观察点，不同领域即可以提供对相同事件的补充数据；尤其在极端事件下你可能只能从一个领域获取到信息</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">操作：传感器报告信息的方式，如只记录数据、提供事件、控制产生数据的流量-不同操作的传感器可能相互干扰</span></li></ul><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:12.0pt; color:black">观察点：传感器的位置对数据采集的影响</p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:black">    传感器的观察点描述了它所能观察到的封包，而观察点的选取则由“传感器的位置和网络路由器的基础架构的关联”决定。</p><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">可以将网络的观察点转换成简单的节点-链接图，链接可以记录穿过它前往目标的任何流量，然后跟踪节点之间的链接，粗略的描述网络的观察点</span></li></ul></div></div></div><div><p style="margin:0in"> </p><p style="text-align:left;margin:0in;font-family:Arial;font-size:9pt; color:#969696;direction:ltr">已使用 Microsoft OneNote 2016 创建。</p></div></span>
</div>
<hr>
<a name="628"/>

<div>
<span lang="zh-CN" style="font-family:Calibri;font-size:11.0pt"><div style="direction:ltr;border-width:100%"><div style="direction:ltr;margin-top:0in;margin-left:0in;width:9.1381in"><div style="direction:ltr;margin-top:0in;margin-left:.2909in;width:1.6631in"><p style="margin:0in;font-family:&quot;Microsoft YaHei&quot;;font-size:20.0pt">网络术语</p></div><div style="direction:ltr;margin-top:.0388in;margin-left:.2909in;width:1.7034in"><p style="margin:0in;font-size:10.0pt;color:gray"><span style="font-family: Calibri">2017</span><span style="font-family:&quot;Microsoft YaHei&quot;">年</span><span style="font-family:Calibri">3</span><span style="font-family:&quot;Microsoft YaHei&quot;">月</span><span style="font-family:Calibri">10</span><span style="font-family:&quot;Microsoft YaHei&quot;">日</span></p><p style="margin:0in;font-family:Calibri;font-size:10.0pt;color:gray">10:18</p></div><div style="direction:ltr;margin-top:.4743in;margin-left:0in;width:9.1381in"><ul style="margin-left:.2902in;direction:ltr;unicode-bidi:embed;margin-top: 0in;margin-bottom:0in"><li style="list-style: none; display: inline"><p style="margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:10.5pt; color:red"> </p><p style="margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:14.0pt"><span style="font-weight:bold;background:white">软件中心的概念</span></p><p style="margin:0in;margin-left:.375in;font-family:微软雅黑;font-size:10.5pt; color:red"> </p><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:red"><span style="font-family:微软雅黑;font-size:10.5pt;color:red;background:white">在数据中心出现以前</span><span style="font-family:微软雅黑;font-size:10.5pt;color:black;background:white">：计算资源、存储资源、连接它们的网络资源 都位于用户的桌面PC上</span></li></ul><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;color:black;background:white">企业安装了 </span><span style="font-family:微软雅黑;font-size:10.5pt;color:red;background:white">部门服务器</span><span style="font-family:微软雅黑;font-size:10.5pt;color:black;background:white"> 来提供上述资源；但是只能提供本地服务或有限服务、无法处理负荷的增长以及用户更大范围的需求</span></li></ul><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:red"><span style="font-family:微软雅黑;font-size:10.5pt;color:red;background:white">集中化的数据中心</span><span style="font-family:微软雅黑;font-size:10.5pt;color:black;background:white">：简化了软硬件管理与维护（其最初设计就是为了把传统的计算资源-PC服务器、与之相连的存储资源-存储局域网络SAN、与用户相连的网络资源 从物理上分隔开）、便于所有企业用户之间的资源共享；但是其内部的计算资源只能用于提供特定的服务器功能，相应的操作系统要占用整个服务器-运行邮件、数据库等一种</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:red"><span style="font-family:微软雅黑;font-size:10.5pt;color:red;background:white">虚拟化技术</span><span style="font-family:微软雅黑;font-size:10.5pt;color:black;background:white">：能够在宿主操作系统中-Linux，</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt;color:black; background:white">像运行其他软件</span><span style="font-family:微软雅黑;font-size: 10.5pt;color:black;background:white">一样运行一个或多个客户操作系统-Windows。其中 虚拟机管理程序-Hypervisor用于生成一个模拟真实计算环境（比如虚拟网卡、BIOS、声卡、显卡）的虚拟环境；然后在这些虚拟机上分配真实的资源</span></li><li style="list-style: none; display: inline"><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="circle"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt;background: white">这意味着 某些服务器功能/软件不再需要固定占用某些硬件资源，而是能够以一种非常灵活的方式部署--作为一个个虚拟机共存；也能够充分的利用硬件平台--一台物理服务器上可以运行多个虚拟机</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt;background: white">数据中心服务器可以在虚拟环境中同时 运行多个操作系统，通过内存、计算资源、存储的升级和补充，还可以增加操作系统的数量</span></li></ul></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:red"><span style="font-family:微软雅黑;font-size:10.5pt;color:red;background:white">弹性计算</span><span style="font-family:微软雅黑;font-size:10.5pt;color:black;background:white">：网络管理员不在根据物理机的情况来确定计算能力，取而代之的是计算能力可以随着资源的变化动态增减。</span></li><li style="list-style: none; display: inline"><ol style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in;font-family:微软雅黑;font-size:10.5pt; font-weight:normal;font-style:normal" type="1"><li style="margin-top:0;margin-bottom:0;vertical-align:middle; color:black" value="1"><span style="font-family:微软雅黑;font-size:10.5pt;font-weight: normal;font-style:normal;font-family:微软雅黑;font-size:10.5pt;background: white">在弹性计算的环境下，业务部门可以在物理数据中心之间灵活的迁移服务器（暂停、复制；新建、复制；直接关闭、删除）。</span><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">基于电力和冷却系统的角度，来优化数据中心资源/虚拟机的‘地理’位置配置以提高效用；通过 bin packing 技术可以针对不同特性进行优化</span></li><li style="list-style: none; display: inline"><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="square"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt;background:white">比如服务器的网络局限性、关闭未使用的物理机以减少耗电和节省冷却系统</span></li></ul></li></ul></li></ol></li></ul><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:black">               2.  刨除灵活部署外，在运维效率上则出现两方面的新问题</p><ul style="margin-left:1.125in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">如何 将存储设备和计算能力 的使用率最大化：因为随着时间的增长，计算能力的需求总是越来越高，且用户也不允许服务器中断拥挤的现象发生；所以IT部门需要 </span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">提前很长时间 </span><span style="font-family:微软雅黑;font-size:10.5pt">订购下一年所有预计的设备，但是一旦购买并安装了这些设备它们就会消耗电力、冷却系统和空间资源，即便数月之后它们才会被使用</span></li><li style="list-style: none; display: inline"><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="square"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">AWS：设备增长确实需要提前于计算服务的需求，但是不能放任闲置，而是利用弹性计算的原则出售未使用的资源池，从而使资源达到几乎百分之百的利用率。这属于一种弹性计算服务。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">超虚拟化：多数大型数据中心都是在超大规模上实现弹性计算的，故将 弹性计算服务又称为超虚拟化。</span></li></ul></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">耗电和冷却系统的效率问题</span></li></ul><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:red">多租户数据中心：虚拟化服务、访问控制和资源管理机制、外部用户如何访问其内部网络</p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:black">    </p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:12.0pt; color:black">  AWS模型已经解决了前两个关键点，那如何解决第三个关键点呢？这将带来一个新的问题：</p><p style="margin:0in;line-height:15pt;font-family:微软雅黑;font-size:10.5pt; color:black">  <span style="font-style:italic">可能有成千上万的用户，其资源可能需要分布在</span><span style="font-style:italic;background:white">任意</span><span style="font-style: italic">不同的物理数据中心上的虚拟机中，同时又要满足对自己AWS云的随时</span><span style="font-weight:bold; font-style:italic">私有</span><span style="font-style:italic">访问。</span></p><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">如何隔离这些用户呢？换句话说，在多租户数据中心内部用户必须能够访问自己的私有的计算、存储、网络资源的虚拟切片；而这些资源对其他租户来说是</span><span style="font-weight:bold;font-family:微软雅黑;font-size:10.5pt">保密</span><span style="font-family:微软雅黑;font-size:10.5pt">的。</span></li></ul><p style="margin:0in;font-family:&quot;Microsoft YaHei&quot;;font-size:11.0pt"><span style="font-weight:bold">基于多租户共享度</span></p><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">云架构下数据中心应用/服务原型</span></li><li style="list-style: none; display: inline"><ul style="margin-left:.375in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="circle"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">基础设施即服务（IaaS）：共享基础设施（计算资源、存储资源、网络资源）。如 亚马逊AWS。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">平台即服务（PaaS）：共享应用程序开发环境。如 Google App。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-family:微软雅黑;font-size:10.5pt">软件即服务（SaaS）：共享应用程序。如 Salesforce.com。</span></li></ul></li></ul><p style="margin:0in;font-family:Calibri;font-size:11.0pt"> </p><p style="margin:0in;font-family:&quot;Microsoft YaHei&quot;;font-size:14.0pt"><span style="font-weight:bold">令牌环与以太网</span></p><p style="margin:0in;font-family:&quot;Microsoft YaHei&quot;;font-size:14.0pt"> </p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"><span style="background:white">令牌环网（Token Ring）是一种</span><span style="font-weight: bold;background:white"> LAN 协议</span><span style="background:white">，其中所有的工作站都连接到一个环上，每个工作站只能同直接相邻的工作站传输数据。通过围绕环的令牌信息授予工作站传输权限。</span></p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">IEEE 802.5 中定义的令牌环源自 IBM 令牌环 LAN 技术。两种方式都基于令牌传递（Token Passing）技术。虽有少许差别，但总体而言，两种方式是相互兼容的。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">令牌环网（Token Ring）适合于低速网络，光纤分布式数据接口（FDDI）适合于高速网络</span></li></ul><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black"> </p><p style="margin:0in;font-family:微软雅黑;font-size:10.5pt;color:black">以太网(Ethernet)指的是由Xerox公司创建并由Xerox、Intel和DEC公司联合开发的<span style="font-weight:bold">基带局域网规范</span>，是当今现有局域网采用的最通用的通信协议标准。</p><ul style="margin-left:0in;direction:ltr;unicode-bidi:embed; margin-top:0in;margin-bottom:0in" type="disc"><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">以太网络使用CSMA/CD（载波监听多路访问及冲突检测）技术，并以10M/S的速率运行在多种类型的电缆上。以太网符合IEEE802.3系列标准。</span></li><li style="margin-top:0;margin-bottom:0;vertical-align:middle;color:black"><span style="font-style:italic;font-family:微软雅黑;font-size:10.5pt">包括标准的以太网（10Mbit/s)、快速以太网（100Mbit/s）和10G（10Gbit/s）以太网。</span><span style="font-family:微软雅黑;font-size:10.5pt">【TCPIP--网络拓扑层次】</span></li></ul></li></ul></div></div></div><div><p style="margin:0in"> </p><p style="text-align:left;margin:0in;font-family:Arial;font-size:9pt; color:#969696;direction:ltr">已使用 Microsoft OneNote 2016 创建。</p></div></span>
</div></body></html> 